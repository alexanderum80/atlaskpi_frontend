
kpi-item-list(
    title="KPIs",
    aliases="kpis",
    [items]="vm.kpiItems",
    [itemViewModel]="vm",
    [addItemActivityName]="'AddKpiActivity'",
    [itemListActivityName]="actionActivityNames",
    [actionItems] = "vm.menuItems",
    [itemType]="itemType",
    [tableRowTemplate]="tableItem",
    (onAddActionClicked)="add()",
    (onItemActionClicked)="actionClicked($event)",
    (onItemClicked)="editClickedList($event)")

ng-template(#tableItem, let-item="item")
    //- image
    div(flex-initial)
        img(*ngIf="item.imagePath", [src]="item.imagePath", [style.height.px]="55")
    //- title & subtitle
    
    div(flex)
        .m-t-10.m-l-10 
            h2.title {{ item.title }}
            small {{ item.subtitle }}
    div(flex)
        .m-t-10.m-l-5 
            h2.title {{ item.createdDate | date:'M/dd/yyyy'}}
            small {{ item.createdBy }}
    div(flex)
        .m-t-10.m-l-5 
            h2.title {{ item.updatedDate | date:'M/dd/yyyy'}}
            small {{ item.updatedBy }}
    
    //- extras
    //- div(flex)
    //-     .m-t-10.m-l-10
    //-         span {{ item.extras.tags }}

bw-modal(#errorModal='')
    bw-modal-header
        h4.modal-title.c-black {{ lastError?.title }}
    bw-modal-body
        div(layout="row", layout-padding, layout-align="center center")
            i.zmdi.zmdi-alert-octagon.c-red.big-icon.m-r-20(flex-none)
            div(layout="column", flex)
                .m-b-10(flex) {{ lastError?.msg }}
                div(*ngFor="let item of lastError?.items", flex)
                    strong {{ item }}
    bw-modal-footer
        bw-button(color="blue", title="Ok", [simple], icon="close", (clicked)="errorModal.close()")
